<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.portal.admin.dao.FaqMgmDao">

    <select id="search"  resultType="ParamMap">
        SELECT  
                A.FAQ_ID
        ,       A.QUESTION
        ,       A.ANSWER
        ,       A.SORT_NO
        ,       A.USE_YN
        FROM    FAQ     A 
        WHERE	1 = 1
        ORDER   BY
                A.SORT_NO
    </select>
    <insert id="save"  parameterType="map">
        MERGE INTO FAQ  A
        USING (SELECT 'A' AS A) B
        ON  A.FAQ_ID = #{faqId}
        WHEN    MATCHED THEN
                UPDATE
                SET
                    QUESTION        = #{question}
                ,   ANSWER          = #{answer}
                ,   SORT_NO         = FN_TO_NUMBER(#{sortNo})
                ,   USE_YN          = #{useYn}
                ,   UPDATE_BY       = #{loginUserId}
                ,   UPDATE_DATE     = NOW()
        WHEN    NOT MATCHED THEN
                INSERT
                (
                    QUESTION        
                ,   ANSWER          
                ,   SORT_NO         
                ,   USE_YN          
                ,   CREATE_BY       
                ,   CREATE_DATE     
                )
                VALUES
                (
                    #{question}
                ,   #{answer}
                ,   FN_TO_NUMBER(#{sortNo})
                ,   #{useYn}
                ,   #{loginUserId}
                ,   NOW()
                );
    </insert>
    
    <delete id="delete" parameterType="map">
        DELETE FROM FAQ
        WHERE FAQ_ID = #{faqId}
    </delete>
    
</mapper>